(window.webpackJsonp=window.webpackJsonp||[]).push([[47],{537:function(s,t,a){"use strict";a.r(t);var e=a(4),n=Object(e.a)({},(function(){var s=this,t=s.$createElement,a=s._self._c||t;return a("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[a("div",{staticClass:"custom-block tip"},[a("p",[s._v("最近在测试一些功能需要安装部署项目，而家中没有环境，所以直接VM虚拟机搭建个，以往搭建的并未整理相关文档仅留有干净系统备份直接还原就用了，这次网络配置有所调整固重新搭建，不多说直接进入正题。")])]),s._v(" "),a("p",[a("strong",[s._v("本次安装系统为官方下载的CentOS 7.6 官方地址：")]),s._v(" https://www.centos.org/download/")]),s._v(" "),a("p",[s._v("VMware安装这里不多详述，直接添加自定义->Linux-CentOS 64位->CPU1核->内存2G->网络NAT->磁盘20G")]),s._v(" "),a("h2",{attrs:{id:"导入iso文件，开始系统安装"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#导入iso文件，开始系统安装"}},[s._v("#")]),s._v(" 导入ISO文件，开始系统安装")]),s._v(" "),a("h3",{attrs:{id:"_1-语言选择"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_1-语言选择"}},[s._v("#")]),s._v(" 1. 语言选择")]),s._v(" "),a("p",[s._v("中文/英文（根据需求选择）")]),s._v(" "),a("h3",{attrs:{id:"_2-软件选择"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_2-软件选择"}},[s._v("#")]),s._v(" 2. 软件选择")]),s._v(" "),a("p",[s._v("最小安装（根据需求选择）")]),s._v(" "),a("h3",{attrs:{id:"_3-安装位置"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_3-安装位置"}},[s._v("#")]),s._v(" 3. 安装位置")]),s._v(" "),a("p",[s._v("分区（根据需求选择）")]),s._v(" "),a("table",[a("thead",[a("tr",[a("th",{staticStyle:{"text-align":"center"}},[s._v("分区")]),s._v(" "),a("th",{staticStyle:{"text-align":"center"}},[s._v("大小")]),s._v(" "),a("th",{staticStyle:{"text-align":"center"}},[s._v("设备类型")]),s._v(" "),a("th",{staticStyle:{"text-align":"center"}},[s._v("文件系统")])])]),s._v(" "),a("tbody",[a("tr",[a("td",{staticStyle:{"text-align":"center"}},[s._v("/boot")]),s._v(" "),a("td",{staticStyle:{"text-align":"center"}},[s._v("500M")]),s._v(" "),a("td",{staticStyle:{"text-align":"center"}},[s._v("标准分区")]),s._v(" "),a("td",{staticStyle:{"text-align":"center"}},[s._v("xfs")])]),s._v(" "),a("tr",[a("td",{staticStyle:{"text-align":"center"}},[s._v("swap")]),s._v(" "),a("td",{staticStyle:{"text-align":"center"}},[s._v("2G")]),s._v(" "),a("td",{staticStyle:{"text-align":"center"}},[s._v("LVM")]),s._v(" "),a("td",{staticStyle:{"text-align":"center"}},[s._v("swap")])]),s._v(" "),a("tr",[a("td",{staticStyle:{"text-align":"center"}},[s._v("/")]),s._v(" "),a("td",{staticStyle:{"text-align":"center"}},[s._v("剩余空间")]),s._v(" "),a("td",{staticStyle:{"text-align":"center"}},[s._v("LVM")]),s._v(" "),a("td",{staticStyle:{"text-align":"center"}},[s._v("xfs")])])])]),s._v(" "),a("h3",{attrs:{id:"_4-设置root账户密码及其他用户"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_4-设置root账户密码及其他用户"}},[s._v("#")]),s._v(" 4. 设置root账户密码及其他用户")]),s._v(" "),a("h3",{attrs:{id:"_5-设置主机名"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_5-设置主机名"}},[s._v("#")]),s._v(" 5. 设置主机名")]),s._v(" "),a("p",[s._v("yourname 修改为你的主机名，为方便后续配置还是改的好。")]),s._v(" "),a("div",{staticClass:"language-shell line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[s._v("hostnamectl set-hostname yourname\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("h3",{attrs:{id:"_6-设置固定ip地址"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_6-设置固定ip地址"}},[s._v("#")]),s._v(" 6. 设置固定IP地址")]),s._v(" "),a("p",[s._v("ens32 修改为你的网卡名，可通过ip addr命令查看；IP地址根据自己需要修改，这里强调下我的VM虚拟网卡NAT模式网关为192.168.107.2，DNS也改为相同即可访问外网。")]),s._v(" "),a("div",{staticClass:"language-shell line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function"}},[s._v("sed")]),s._v(" -i -e "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'s/^BOOTPROTO=.*/BOOTPROTO=static #静态获取IP地址/'")]),s._v(" -e "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'s/^ONBOOT=.*/ONBOOT=yes #开机自动联网/'")]),s._v(" /etc/sysconfig/network-scripts/ifcfg-ens32\n"),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("cat")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">>")]),s._v(" /etc/sysconfig/network-scripts/ifcfg-ens32 "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<<")]),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("EOF\nIPADDR=192.168.107.176 #静态IP地址\nNETMASK=255.255.255.0 #子网掩码\nGATEWAY=192.168.107.2 #默认网关\nDNS1=192.168.107.2 #DNS服务器\nEOF")]),s._v("\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 重启网络服务")]),s._v("\nsystemctl restart network\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br"),a("span",{staticClass:"line-number"},[s._v("10")]),a("br")])]),a("h3",{attrs:{id:"_7-关闭系统默认防火墙"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_7-关闭系统默认防火墙"}},[s._v("#")]),s._v(" 7. 关闭系统默认防火墙")]),s._v(" "),a("div",{staticClass:"language-shell line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 关闭防火墙")]),s._v("\nsystemctl stop firewalld\nsystemctl disable firewalld\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 清理防火墙规则")]),s._v("\niptables -F "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("&&")]),s._v(" iptables -X "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("&&")]),s._v(" iptables -t nat -F "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("&&")]),s._v(" iptables -t nat -X\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 设置默认转发策略")]),s._v("\niptables -P FORWARD ACCEPT\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br")])]),a("h3",{attrs:{id:"_8-关闭selinux"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_8-关闭selinux"}},[s._v("#")]),s._v(" 8. 关闭SELinux")]),s._v(" "),a("div",{staticClass:"language-shell line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[s._v("setenforce "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("sed")]),s._v(" -i "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'s/^SELINUX=.*/SELINUX=disabled/'")]),s._v(" /etc/selinux/config\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br")])]),a("h3",{attrs:{id:"_9-设置ntp时间同步"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_9-设置ntp时间同步"}},[s._v("#")]),s._v(" 9. 设置NTP时间同步")]),s._v(" "),a("div",{staticClass:"language-shell line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 调整系统时区")]),s._v("\ntimedatectl set-timezone Asia/Shanghai\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 将当前的 UTC 时间写入硬件时钟")]),s._v("\ntimedatectl set-local-rtc "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 重启依赖于系统时间的服务")]),s._v("\nsystemctl restart rsyslog\nsystemctl restart crond\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 更新系统时间")]),s._v("\nyum -y "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("install")]),s._v(" ntpdate\nntpdate cn.pool.ntp.org\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br"),a("span",{staticClass:"line-number"},[s._v("10")]),a("br")])]),a("h3",{attrs:{id:"_10-设置yum源"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_10-设置yum源"}},[s._v("#")]),s._v(" 10. 设置yum源")]),s._v(" "),a("p",[s._v("这里说明下我运行yum –y install不好使，yum install –y好使。。。没安装成功你可以试下，可能跟我系统最小安装有关吧。")]),s._v(" "),a("div",{staticClass:"language-shell line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 配置阿里云源")]),s._v("\nyum "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("install")]),s._v(" –y "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("wget")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("mv")]),s._v(" /etc/yum.repos.d/CentOS-Base.repo /etc/yum.repos.d/CentOS-Base.repo_back\n"),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("wget")]),s._v(" -O /etc/yum.repos.d/CentOS-Base.repo http://mirrors.aliyun.com/repo/Centos-7.repo\nyum clean all\nyum makecache\nyum –y update "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#该命令若没反应把–y去了重试")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 配置EPEL源")]),s._v("\nyum "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("install")]),s._v(" –y epel-release\n"),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("mv")]),s._v(" /etc/yum.repos.d/epel.repo /etc/yum.repos.d/epel.repo_back\n"),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("wget")]),s._v(" -O /etc/yum.repos.d/epel.repo http://mirrors.aliyun.com/repo/epel-7.repo\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 配置yum源优先级")]),s._v("\nyum "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("install")]),s._v(" –y yum-priorities\n"),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("vi")]),s._v(" /etc/yum/pluginconf.d/priorities.conf\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#里面为下列内容即可")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#[main]")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#enabled = 1")]),s._v("\n\n"),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("vi")]),s._v(" /etc/yum.repos.d/CentOS-Base.repo\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#里面下列每个标签属性最后一行添加priority=xx，数字越小优先级越高")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#[base], [updates],[extras] … priority=1")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#[centosplus],[contrib] … priority=2")]),s._v("\n\n"),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("vi")]),s._v(" /etc/yum.repos.d/epel.repo\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#里面下列每个标签属性最后一行添加priority=xx，数字越小优先级越高")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#[epel], [epel-debuginfo], [epel-source] … priority=11")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br"),a("span",{staticClass:"line-number"},[s._v("10")]),a("br"),a("span",{staticClass:"line-number"},[s._v("11")]),a("br"),a("span",{staticClass:"line-number"},[s._v("12")]),a("br"),a("span",{staticClass:"line-number"},[s._v("13")]),a("br"),a("span",{staticClass:"line-number"},[s._v("14")]),a("br"),a("span",{staticClass:"line-number"},[s._v("15")]),a("br"),a("span",{staticClass:"line-number"},[s._v("16")]),a("br"),a("span",{staticClass:"line-number"},[s._v("17")]),a("br"),a("span",{staticClass:"line-number"},[s._v("18")]),a("br"),a("span",{staticClass:"line-number"},[s._v("19")]),a("br"),a("span",{staticClass:"line-number"},[s._v("20")]),a("br"),a("span",{staticClass:"line-number"},[s._v("21")]),a("br"),a("span",{staticClass:"line-number"},[s._v("22")]),a("br"),a("span",{staticClass:"line-number"},[s._v("23")]),a("br"),a("span",{staticClass:"line-number"},[s._v("24")]),a("br"),a("span",{staticClass:"line-number"},[s._v("25")]),a("br"),a("span",{staticClass:"line-number"},[s._v("26")]),a("br")])]),a("h3",{attrs:{id:"_11-关闭无关服务，节省系统资源"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_11-关闭无关服务，节省系统资源"}},[s._v("#")]),s._v(" 11. 关闭无关服务，节省系统资源")]),s._v(" "),a("div",{staticClass:"language-shell line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[s._v("systemctl stop postfix "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("&&")]),s._v(" systemctl disable postfix\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("h3",{attrs:{id:"_12-设置-rsyslogd-和-systemd-journal"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_12-设置-rsyslogd-和-systemd-journal"}},[s._v("#")]),s._v(" 12. 设置 rsyslogd 和 systemd journal")]),s._v(" "),a("div",{staticClass:"language-shell line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function"}},[s._v("mkdir")]),s._v(" /var/log/journal "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#持久化保存日志的目录")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("mkdir")]),s._v(" /etc/systemd/journald.conf.d\n"),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("cat")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" /etc/systemd/journald.conf.d/99-prophet.conf "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<<")]),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("EOF\n[Journal]\n# 持久化保存到磁盘\nStorage=persistent\n\n# 压缩历史日志\nCompress=yes\n\nSyncIntervalSec=5m\nRateLimitInterval=30s\nRateLimitBurst=1000\n\n# 最大占用空间 10G\nSystemMaxUse=10G\n\n# 单日志文件最大 200M\nSystemMaxFileSize=200M\n\n# 日志保存时间 2 周\nMaxRetentionSec=2week\n\n# 不将日志转发到 syslog\nForwardToSyslog=no\nEOF")]),s._v("\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 重启journal服务")]),s._v("\nsystemctl restart systemd-journald\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br"),a("span",{staticClass:"line-number"},[s._v("10")]),a("br"),a("span",{staticClass:"line-number"},[s._v("11")]),a("br"),a("span",{staticClass:"line-number"},[s._v("12")]),a("br"),a("span",{staticClass:"line-number"},[s._v("13")]),a("br"),a("span",{staticClass:"line-number"},[s._v("14")]),a("br"),a("span",{staticClass:"line-number"},[s._v("15")]),a("br"),a("span",{staticClass:"line-number"},[s._v("16")]),a("br"),a("span",{staticClass:"line-number"},[s._v("17")]),a("br"),a("span",{staticClass:"line-number"},[s._v("18")]),a("br"),a("span",{staticClass:"line-number"},[s._v("19")]),a("br"),a("span",{staticClass:"line-number"},[s._v("20")]),a("br"),a("span",{staticClass:"line-number"},[s._v("21")]),a("br"),a("span",{staticClass:"line-number"},[s._v("22")]),a("br"),a("span",{staticClass:"line-number"},[s._v("23")]),a("br"),a("span",{staticClass:"line-number"},[s._v("24")]),a("br"),a("span",{staticClass:"line-number"},[s._v("25")]),a("br"),a("span",{staticClass:"line-number"},[s._v("26")]),a("br"),a("span",{staticClass:"line-number"},[s._v("27")]),a("br"),a("span",{staticClass:"line-number"},[s._v("28")]),a("br"),a("span",{staticClass:"line-number"},[s._v("29")]),a("br")])]),a("p",[s._v("至此系统安装及环境配置完成，且在外面通过IP可以建立远程会话，剩下的可劲造吧~")])])}),[],!1,null,null,null);t.default=n.exports}}]);