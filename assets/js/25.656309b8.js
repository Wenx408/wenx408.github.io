(window.webpackJsonp=window.webpackJsonp||[]).push([[25],{534:function(t,e,_){"use strict";_.r(e);var v=_(4),l=Object(v.a)({},(function(){var t=this,e=t.$createElement,_=t._self._c||e;return _("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[_("div",{staticClass:"custom-block tip"},[_("p",[t._v("本篇针对TCP、UDP协议原理及Socket编程进行简单讲解")])]),t._v(" "),_("h2",{attrs:{id:"osi网络七层模型"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#osi网络七层模型"}},[t._v("#")]),t._v(" OSI网络七层模型")]),t._v(" "),_("p",[t._v("物理层（光纤）、数据链路层（MAC/LLC）、网络层（IP）、传输层（TCP）、会话层、表示层、应用层")]),t._v(" "),_("table",[_("thead",[_("tr",[_("th",{staticStyle:{"text-align":"left"}},[t._v("低三层")]),t._v(" "),_("th",{staticStyle:{"text-align":"left"}})])]),t._v(" "),_("tbody",[_("tr",[_("td",{staticStyle:{"text-align":"left"}},[t._v("物理层：")]),t._v(" "),_("td",{staticStyle:{"text-align":"left"}},[t._v("使原始的数据比特流能在物理介质上传输。")])]),t._v(" "),_("tr",[_("td",{staticStyle:{"text-align":"left"}},[t._v("数据链路层：")]),t._v(" "),_("td",{staticStyle:{"text-align":"left"}},[t._v("通过校验、确认和反馈重发等手段，形成稳定的数据链路。（01010101）")])]),t._v(" "),_("tr",[_("td",{staticStyle:{"text-align":"left"}},[t._v("网络层：")]),t._v(" "),_("td",{staticStyle:{"text-align":"left"}},[t._v("进行路由选择和流量控制。（IP协议）")])]),t._v(" "),_("tr",[_("td",{staticStyle:{"text-align":"left"}}),t._v(" "),_("td",{staticStyle:{"text-align":"left"}})]),t._v(" "),_("tr",[_("td",{staticStyle:{"text-align":"left"}},[t._v("传输层：")]),t._v(" "),_("td",{staticStyle:{"text-align":"left"}},[t._v("提供可靠的端口到端口的数据传输服务。（TCP/UDP）")])]),t._v(" "),_("tr",[_("td",{staticStyle:{"text-align":"left"}}),t._v(" "),_("td",{staticStyle:{"text-align":"left"}})]),t._v(" "),_("tr",[_("td",{staticStyle:{"text-align":"left"}},[_("strong",[t._v("高三层")])]),t._v(" "),_("td",{staticStyle:{"text-align":"left"}})]),t._v(" "),_("tr",[_("td",{staticStyle:{"text-align":"left"}},[t._v("会话层：")]),t._v(" "),_("td",{staticStyle:{"text-align":"left"}},[t._v("负责建立、管理和终止进程之间的会话和数据交换。")])]),t._v(" "),_("tr",[_("td",{staticStyle:{"text-align":"left"}},[t._v("表示层：")]),t._v(" "),_("td",{staticStyle:{"text-align":"left"}},[t._v("负责数据格式转换、数据加密与解密、压缩与解压缩等。")])]),t._v(" "),_("tr",[_("td",{staticStyle:{"text-align":"left"}},[t._v("应用层：")]),t._v(" "),_("td",{staticStyle:{"text-align":"left"}},[t._v("为用户的应用进程提供网络服务。")])])])]),t._v(" "),_("h2",{attrs:{id:"传输控制协议tcp"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#传输控制协议tcp"}},[t._v("#")]),t._v(" 传输控制协议TCP")]),t._v(" "),_("p",[t._v("传输控制协议（TCP）是Internet一个重要的传输层协议。TCP提供面向连接、可靠、有序、字节流传输服务。应用程序在使用TCP之前，必须先建立TCP连接。")]),t._v(" "),_("table",[_("thead",[_("tr",[_("th",{staticStyle:{"text-align":"center"}},[t._v("源端口号（16位） | 目的端口号（16位）")])])]),t._v(" "),_("tbody",[_("tr",[_("td",{staticStyle:{"text-align":"center"}},[t._v("序号（32位）")])]),t._v(" "),_("tr",[_("td",{staticStyle:{"text-align":"center"}},[t._v("确认序号序号（32位）")])]),t._v(" "),_("tr",[_("td",{staticStyle:{"text-align":"center"}},[t._v("首部长度（4位）| 保留（6位）|URG|ACK|PSH|PST|SYN|FIN| 接收窗口（16位）")])]),t._v(" "),_("tr",[_("td",{staticStyle:{"text-align":"center"}},[t._v("| 紧急指针（16位）")])]),t._v(" "),_("tr",[_("td",{staticStyle:{"text-align":"center"}},[t._v("选项（长度可变）                    |                    填充")])]),t._v(" "),_("tr",[_("td",{staticStyle:{"text-align":"center"}},[t._v("数据")])])])]),t._v(" "),_("table",[_("thead",[_("tr",[_("th",[t._v("标志位说明")])])]),t._v(" "),_("tbody",[_("tr",[_("td",[t._v("URG：紧急指针")])]),t._v(" "),_("tr",[_("td",[t._v("ACK：确认序号")])]),t._v(" "),_("tr",[_("td",[t._v("PSH：有DATA数据传输")])]),t._v(" "),_("tr",[_("td",[t._v("PST：连接重置")])]),t._v(" "),_("tr",[_("td",[t._v("SYN：建立连接")])]),t._v(" "),_("tr",[_("td",[t._v("FIN：关闭连接")])])])]),t._v(" "),_("h2",{attrs:{id:"tcp握手机制"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#tcp握手机制"}},[t._v("#")]),t._v(" TCP握手机制")]),t._v(" "),_("p",[_("strong",[t._v("三次握手过程：")])]),t._v(" "),_("ol",[_("li",[t._v("客户端SYN_SEND等待确认 -- SYN=1,seq=x --\x3e> 服务端SYN_RECV收到请求等待确认")]),t._v(" "),_("li",[t._v("客户端ESTABLISHED建立连接 <<-- SYN=1,ACK=1,seq=y,ack_seq=x+1 -- 服务端SYN_RECV收到请求等待确认")]),t._v(" "),_("li",[t._v("客户端ESTABLISHED建立连接 -- ACK=1,seq=x+1,ack_seq=y+1 --\x3e> 服务端ESTABLISHED建立连接")])]),t._v(" "),_("p",[_("strong",[t._v("四次挥手过程：")])]),t._v(" "),_("ol",[_("li",[_("p",[t._v("客户端FIN_WAIT_1等待确认 -- FIN=1,seq=u --\x3e> 服务端CLOSE_WAIT半关闭")])]),t._v(" "),_("li",[_("p",[t._v("客户端FIN_WAIT_2等待释放 <<-- ACK=1,seq=v,ack_seq=u+1 -- 服务端CLOSE_WAIT半关闭")])]),t._v(" "),_("li",[_("p",[t._v("客户端TIME_WAIT等待一会 <<-- FIN=1,ACK=1,seq=w,ack_seq=u+1 -- 服务端LAST_ACK等待确认")])]),t._v(" "),_("li",[_("p",[t._v("客户端TIME_WAIT等待一会 -- ACK=1,seq=u+1,ack_seq=w+1 --\x3e> 服务端CLOSE关闭连接")]),t._v(" "),_("p",[t._v("客户端CLOSE关闭连接")])])]),t._v(" "),_("h2",{attrs:{id:"用户数据报协议udp"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#用户数据报协议udp"}},[t._v("#")]),t._v(" 用户数据报协议UDP")]),t._v(" "),_("p",[t._v("用户数据报协议UDP是Internet传输层协议。提供无连接、不可靠、数据报尽力传输服务。")]),t._v(" "),_("table",[_("thead",[_("tr",[_("th",{staticStyle:{"text-align":"center"}},[t._v("IP数据部分")])])]),t._v(" "),_("tbody",[_("tr",[_("td",{staticStyle:{"text-align":"center"}},[t._v("UDP首部 | UDO数据部分")])]),t._v(" "),_("tr",[_("td",{staticStyle:{"text-align":"center"}},[t._v("源端口号（2字节）| 目的端口号（2字节）")])]),t._v(" "),_("tr",[_("td",{staticStyle:{"text-align":"center"}},[t._v("长度（2字节）| 校验和（2字节）")])]),t._v(" "),_("tr",[_("td",{staticStyle:{"text-align":"center"}},[t._v("应用数据")])])])]),t._v(" "),_("p",[t._v("开发应用人员在UDP上构建应用，关注以下几点：")]),t._v(" "),_("ol",[_("li",[t._v("应用进程更容易控制发送什么数据以及何时发送")]),t._v(" "),_("li",[t._v("无需建立连接")]),t._v(" "),_("li",[t._v("无连接状态")]),t._v(" "),_("li",[t._v("首部开销小")])]),t._v(" "),_("p",[_("strong",[t._v("UDP和TCP比较")])]),t._v(" "),_("table",[_("thead",[_("tr",[_("th",{staticStyle:{"text-align":"center"}},[t._v("TCP")]),t._v(" "),_("th",{staticStyle:{"text-align":"center"}},[t._v("UDP")])])]),t._v(" "),_("tbody",[_("tr",[_("td",{staticStyle:{"text-align":"center"}},[t._v("面向连接")]),t._v(" "),_("td",{staticStyle:{"text-align":"center"}},[t._v("无连接")])]),t._v(" "),_("tr",[_("td",{staticStyle:{"text-align":"center"}},[t._v("提供可靠性保证")]),t._v(" "),_("td",{staticStyle:{"text-align":"center"}},[t._v("不可靠")])]),t._v(" "),_("tr",[_("td",{staticStyle:{"text-align":"center"}},[t._v("慢")]),t._v(" "),_("td",{staticStyle:{"text-align":"center"}},[t._v("快")])]),t._v(" "),_("tr",[_("td",{staticStyle:{"text-align":"center"}},[t._v("资源占用多")]),t._v(" "),_("td",{staticStyle:{"text-align":"center"}},[t._v("资源占用少")])])])]),t._v(" "),_("h2",{attrs:{id:"socket编程"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#socket编程"}},[t._v("#")]),t._v(" Socket编程")]),t._v(" "),_("p",[t._v("Internet中应用最广泛的网络应用编程接口，实现3种底层协议接口：")]),t._v(" "),_("ol",[_("li",[t._v("数据报类型套接字SOCK_DGRAM（面向UDP接口）")]),t._v(" "),_("li",[t._v("流式套接字SOCK_STREAM（面向TCP接口）")]),t._v(" "),_("li",[t._v("原始套接字SOCK_RAW（面向网络层协议接口IP、ICMP等）")])]),t._v(" "),_("p",[t._v("主要Socket API及其调用过程：")]),t._v(" "),_("p",[t._v("创建套接字 --\x3e 端点绑定 --\x3e 发送数据 --\x3e 接收数据 --\x3e 释放套接字")]),t._v(" "),_("p",[t._v("Socket API函数定义")]),t._v(" "),_("p",[t._v("listen()、accept()函数只能用于服务器端")]),t._v(" "),_("p",[t._v("connect()函数只能用于客户端")]),t._v(" "),_("p",[t._v("socket()、bind()、send()、recv()、sendto()、recvfrom()、close()")])])}),[],!1,null,null,null);e.default=l.exports}}]);