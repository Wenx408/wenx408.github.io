(window.webpackJsonp=window.webpackJsonp||[]).push([[10],{524:function(s,a,t){s.exports=t.p+"assets/img/202004300201.50b4bdc6.jpg"},525:function(s,a,t){s.exports=t.p+"assets/img/202004300202.47ff5517.jpg"},526:function(s,a,t){s.exports=t.p+"assets/img/202004300203.023932e3.jpg"},577:function(s,a,t){"use strict";t.r(a);var n=t(6),e=Object(n.a)({},(function(){var s=this,a=s.$createElement,n=s._self._c||a;return n("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[n("div",{staticClass:"custom-block tip"},[n("p",{staticClass:"title"}),n("p",[s._v("本来以为安装过Redis以及MySQL的rpm包源码安装那是手到擒来，结果墨迹了半个月，对你没看错就是半个月~ 从阅读cmake编译参数到my.cnf文件我把官方文档看了个遍~ 网上大神写的也是阅遍了，但大都千篇一律，有的是远古版本安装，有的根本运行不了，有的甚至参数名都写错了，还都错的一样，当然还有些确实写的不错~ 所以我决定直接看官方文档，毕竟以往都是查看官方文档的~")])]),s._v(" "),n("h2",{attrs:{id:"_1-下载mysql的源码包"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_1-下载mysql的源码包"}},[s._v("#")]),s._v(" 1. 下载MySQL的源码包")]),s._v(" "),n("p",[n("img",{attrs:{src:t(524),alt:"code001"}})]),s._v(" "),n("p",[n("img",{attrs:{src:t(525),alt:"code002"}})]),s._v(" "),n("p",[n("img",{attrs:{src:t(526),alt:"code003"}})]),s._v(" "),n("div",{staticClass:"language-shell line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-shell"}},[n("code",[n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 安装wget")]),s._v("\nyum "),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("install")]),s._v(" –y "),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("wget")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 下载官方的带boost源码包mysql-boost-5.7.30.tar.gz")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("wget")]),s._v(" https://dev.mysql.com/get/Downloads/MySQL-5.7/mysql-boost-5.7.30.tar.gz\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 若下载失败（下载成功此步跳过），可安装rz从本地上传mysql-boost-5.7.30.tar.gz")]),s._v("\nyum -y "),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("install")]),s._v(" lrzsz\nrz\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br")])]),n("h2",{attrs:{id:"_2-安装依赖"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_2-安装依赖"}},[s._v("#")]),s._v(" 2. 安装依赖")]),s._v(" "),n("div",{staticClass:"language-shell line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-shell"}},[n("code",[n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 先检查有没有安装过mysql或mariadb")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("rpm")]),s._v(" -qa "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("grep")]),s._v(" mysql\n"),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("rpm")]),s._v(" -qa "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("grep")]),s._v(" mariadb\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 我有个mariadb-libs-5.5.64-1.el7.x86_64，把它给卸载了")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("rpm")]),s._v(" -e --nodeps mariadb-libs-5.5.64-1.el7.x86_64\n\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 以官方文档安装必备依赖：CMake、make 3.75或更高版本、ANSI C ++编译器、SSL库、Boost C ++库、ncurses相关、bison相关")]),s._v("\nyum "),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("install")]),s._v(" -y cmake "),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("make")]),s._v(" gcc gcc-c++ openssl openssl-devel ncurses ncurses-devel bison bison-devel\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br"),n("span",{staticClass:"line-number"},[s._v("8")]),n("br")])]),n("h2",{attrs:{id:"_3-安装mysql"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_3-安装mysql"}},[s._v("#")]),s._v(" 3. 安装MySQL")]),s._v(" "),n("div",{staticClass:"language-shell line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-shell"}},[n("code",[n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 解压缩")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("tar")]),s._v(" zxvf mysql-boost-5.7.30.tar.gz\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 进入目录准备生产项目")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("cd")]),s._v(" mysql-5.7.30\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 为防止发生错误污染源码，新建个目录进行操作")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("mkdir")]),s._v(" bld\n"),n("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("cd")]),s._v(" bld\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 用cmake开始构建项目，用到的参数后面会详细说明")]),s._v("\ncmake "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("..")]),s._v(" -DCMAKE_INSTALL_PREFIX"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("/usr/local/mysql -DMYSQL_DATADIR"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("/usr/local/mysql/data -DSYSCONFDIR"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("/usr/local/mysql/etc -DWITH_INNOBASE_STORAGE_ENGINE"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("ON -DWITH_MYISAM_STORAGE_ENGINE"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("ON -DDEFAULT_CHARSET"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("utf8 -DDEFAULT_COLLATION"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("utf8_general_ci -DENABLED_LOCAL_INFILE"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("ON -DMYSQL_TCP_PORT"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("3306")]),s._v(" -DMYSQL_UNIX_ADDR"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("/usr/local/mysql/tmp/mysql.sock -DWITH_INNODB_MEMCACHED"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("ON -DWITH_BOOST"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("..")]),s._v("/boost/boost_1_59_0\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 开始正式编译，你以为刚才那个时间很长？请做好心理准备这个才是地狱。。。短时间别想完")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("make")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 开始安装，默认/usr/local/mysql")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("make")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("install")]),s._v("\n\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 若编译失败，解决问题后可清理重新编译（成功就不用运行了）")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("make")]),s._v(" clean\n"),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("rm")]),s._v(" CMakeCache.txt\n\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# cmake参数解释，仅解释常用配置，详细可官方文档查询，我这是阅遍后总结的")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# cmake")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# ..\t\t\t\t\t\t\t\t\t\t\t\t源码目录为上级目录")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# -DCMAKE_INSTALL_PREFIX=/usr/local/mysql\t\t\t指定MySQL安装目录")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# -DMYSQL_DATADIR=/usr/local/mysql/data\t\t\t\t指定MySQL数据目录")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# -DSYSCONFDIR=/usr/local/mysql/etc\t\t\t\t\t指定my.cnf选项文件目录")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# -DWITH_INNOBASE_STORAGE_ENGINE=ON\t\t\t\t\tInnodb引擎")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# -DWITH_MYISAM_STORAGE_ENGINE=ON\t\t\t\t\tMyISAM引擎")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# -DDEFAULT_CHARSET=utf8\t\t\t\t\t\t\t服务器字符集，默认latin1")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# -DDEFAULT_COLLATION=utf8_general_ci\t\t\t\t服务器排序规则，默认latin1_swedish_ci")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# -DENABLED_LOCAL_INFILE=ON\t\t\t\t\t\t\t是否为加载数据启用本地，默认为OFF")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# -DMYSQL_TCP_PORT=3306\t\t\t\t\t\t\t\t服务器监听端口，默认为3306")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# -DMYSQL_UNIX_ADDR=/usr/local/mysql/tmp/mysql.sock\tUnix套接字文件路径，默认/tmp/mysql.sock")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# -DWITH_INNODB_MEMCACHED=ON\t\t\t\t\t\t是否生成memcached共享库，默认OFF")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# -DWITH_BOOST=../boost/boost_1_59_0\t\t\t\tBoost库源代码的位置，指向下载的源码包里，相对/绝对路径皆可")]),s._v("\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br"),n("span",{staticClass:"line-number"},[s._v("8")]),n("br"),n("span",{staticClass:"line-number"},[s._v("9")]),n("br"),n("span",{staticClass:"line-number"},[s._v("10")]),n("br"),n("span",{staticClass:"line-number"},[s._v("11")]),n("br"),n("span",{staticClass:"line-number"},[s._v("12")]),n("br"),n("span",{staticClass:"line-number"},[s._v("13")]),n("br"),n("span",{staticClass:"line-number"},[s._v("14")]),n("br"),n("span",{staticClass:"line-number"},[s._v("15")]),n("br"),n("span",{staticClass:"line-number"},[s._v("16")]),n("br"),n("span",{staticClass:"line-number"},[s._v("17")]),n("br"),n("span",{staticClass:"line-number"},[s._v("18")]),n("br"),n("span",{staticClass:"line-number"},[s._v("19")]),n("br"),n("span",{staticClass:"line-number"},[s._v("20")]),n("br"),n("span",{staticClass:"line-number"},[s._v("21")]),n("br"),n("span",{staticClass:"line-number"},[s._v("22")]),n("br"),n("span",{staticClass:"line-number"},[s._v("23")]),n("br"),n("span",{staticClass:"line-number"},[s._v("24")]),n("br"),n("span",{staticClass:"line-number"},[s._v("25")]),n("br"),n("span",{staticClass:"line-number"},[s._v("26")]),n("br"),n("span",{staticClass:"line-number"},[s._v("27")]),n("br"),n("span",{staticClass:"line-number"},[s._v("28")]),n("br"),n("span",{staticClass:"line-number"},[s._v("29")]),n("br"),n("span",{staticClass:"line-number"},[s._v("30")]),n("br"),n("span",{staticClass:"line-number"},[s._v("31")]),n("br"),n("span",{staticClass:"line-number"},[s._v("32")]),n("br"),n("span",{staticClass:"line-number"},[s._v("33")]),n("br")])]),n("h2",{attrs:{id:"_4-初始化数据目录"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_4-初始化数据目录"}},[s._v("#")]),s._v(" 4. 初始化数据目录")]),s._v(" "),n("div",{staticClass:"language-shell line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-shell"}},[n("code",[n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 创建mysql用户和组，该用户没有设置登录权限，如需要请自行修改")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("groupadd")]),s._v(" mysql\n"),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("useradd")]),s._v(" -r -g mysql -s /bin/false mysql\n\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 进入MySQL安装目录")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("cd")]),s._v(" /usr/local/mysql\n\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 创建相关目录")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("mkdir")]),s._v(" -p /usr/local/mysql/data\n"),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("mkdir")]),s._v(" -p /usr/local/mysql/etc\n"),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("mkdir")]),s._v(" -p /usr/local/mysql/tmp\n"),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("mkdir")]),s._v(" -p /usr/local/mysql/logs\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 将目录所有权授予mysql用户和mysql组")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("chown")]),s._v(" -R mysql:mysql /usr/local/mysql\n\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 创建my.cnf配置文件")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("vi")]),s._v(" /usr/local/mysql/etc/my.cnf\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 按 i 键进入INSERT模式，粘贴下面配置（本地测试环境虚拟机1C1G，我还总结了一些计算公式，篇幅太长就不粘贴了，欢迎讨论）")]),s._v("\n\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("client"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("                                                "),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#客户端设置")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("port")]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("3306")]),s._v("                                               "),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#服务器监听端口，默认为3306")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("socket")]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("/usr/local/mysql/tmp/mysql.sock                  "),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#Unix套接字文件路径，默认/tmp/mysql.sock")]),s._v("\n\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("mysqld"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("                                                "),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#服务端设置")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("## 一般配置选项")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("port")]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("3306")]),s._v("                                               "),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#服务器监听端口，默认为3306")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("basedir")]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("/usr/local/mysql                                "),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#MySQL安装根目录")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("datadir")]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("/usr/local/mysql/data                           "),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#MySQL数据文件目录")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("socket")]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("/usr/local/mysql/tmp/mysql.sock                  "),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#Unix套接字文件路径，默认/tmp/mysql.sock")]),s._v("\npid-file"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("/usr/local/mysql/tmp/mysql.pid                 "),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#服务进程pid文件路径")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("character_set_server")]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("utf8                               "),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#默认字符集")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("default_storage_engine")]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("InnoDB                           "),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#默认InnoDB存储引擎")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("user")]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("mysql\n\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("## 连接配置选项")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("max_connections")]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("200")]),s._v("                                     "),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#最大并发连接数")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("table_open_cache")]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("400")]),s._v("                                    "),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#表打开缓存大小，默认2000")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("open_files_limit")]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("1000")]),s._v("                                   "),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#打开文件数限制，默认5000")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("max_connect_errors")]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("200")]),s._v("                                  "),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#最大连接失败数，默认100")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("back_log")]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("100")]),s._v("                                            "),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#请求连接队列数")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("connect_timeout")]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("20")]),s._v("                                      "),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#连接超时时间，默认10秒")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("interactive_timeout")]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("1200")]),s._v("                                "),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#交互式超时时间，默认28800秒")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("wait_timeout")]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("600")]),s._v("                                        "),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#非交互超时时间，默认28800秒")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("net_read_timeout")]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("30")]),s._v("                                     "),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#读取超时时间，默认30秒")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("net_write_timeout")]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("60")]),s._v("                                    "),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#写入超时时间，默认60秒")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("max_allowed_packet")]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("8M                                   "),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#最大传输数据字节，默认4M")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("thread_cache_size")]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("10")]),s._v("                                    "),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#线程缓冲区（池）大小")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("thread_stack")]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("256K                                       "),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#线程栈大小，32位平台196608、64位平台262144")]),s._v("\n\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("## 临时内存配置选项")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("tmpdir")]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("/tmp                                             "),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#临时目录路径")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("tmp_table_size")]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("64M                                      "),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#临时表大小，默认16M")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("max_heap_table_size")]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("64M                                 "),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#最大内存表大小，默认16M")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("sort_buffer_size")]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("1M                                     "),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#排序缓冲区大小，默认256K")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("join_buffer_size")]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("1M                                     "),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#join缓冲区大小，默认256K")]),s._v("\n\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("## Innodb配置选项")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#innodb_thread_concurrency=0\t\t\t\t\t\t\t#InnoDB线程并发数")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("innodb_io_capacity")]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("200")]),s._v("                                  "),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#IO容量，可用于InnoDB后台任务的每秒I/O操作数（IOPS），")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("innodb_io_capacity_max")]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("400")]),s._v("                              "),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#IO最大容量，InnoDB在这种情况下由后台任务执行的最大IOPS数")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("innodb_lock_wait_timeout")]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("50")]),s._v("                             "),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#InnoDB引擎锁等待超时时间，默认50（单位：秒）")]),s._v("\n\n"),n("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("innodb_buffer_pool_size")]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("512M\t\t\t\t\t\t\t"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#InnoDB缓冲池大小，默认128M")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("innodb_buffer_pool_instances")]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("4")]),s._v("                          "),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#InnoDB缓冲池划分区域数")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("innodb_max_dirty_pages_pct")]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("75")]),s._v("\t\t\t\t\t\t\t"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#缓冲池最大允许脏页比例，默认为75")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("innodb_flush_method")]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("O_DIRECT                            "),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#日志刷新方法，默认为fdatasync")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("innodb_flush_log_at_trx_commit")]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("2")]),s._v("                        "),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#事务日志刷新方式，默认为0")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("transaction_isolation")]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("REPEATABLE-READ                   "),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#事务隔离级别，默认REPEATABLE-READ")]),s._v("\n\n"),n("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("innodb_data_home_dir")]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("/usr/local/mysql/data              "),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#表空间文件路径，默认保存在MySQL的datadir中")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("innodb_data_file_path")]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("ibdata1:128M:autoextend           "),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#表空间文件大小")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("innodb_file_per_table")]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("ON                                "),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#每表独立表空间")]),s._v("\n\n"),n("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("innodb_log_group_home_dir")]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("/usr/local/mysql/data         "),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#redoLog文件目录，默认保存在MySQL的datadir中")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("innodb_log_files_in_group")]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("2")]),s._v("                             "),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#日志组中的日志文件数，默认为2")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("innodb_log_file_size")]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("128M                               "),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#日志文件大小，默认为48MB")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("innodb_log_buffer_size")]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("32M                              "),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#日志缓冲区大小，默认为16MB")]),s._v("\n\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("## MyISAM配置选项")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("key_buffer_size")]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("32M                                     "),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#索引缓冲区大小，默认8M")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("read_buffer_size")]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("4M\t\t\t\t\t\t\t\t\t\t"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#顺序读缓区冲大小，默认128K")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("read_rnd_buffer_size")]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("4M\t\t\t\t\t\t\t\t\t"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#随机读缓冲区大小，默认256K")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("bulk_insert_buffer_size")]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("8M                              "),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#块插入缓冲区大小，默认8M")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("myisam_sort_buffer_size")]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("8M\t\t\t\t\t\t\t\t"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#MyISAM排序缓冲大小，默认8M")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#myisam_max_sort_file_size=1G                           #MyISAM排序最大临时大小")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("myisam_repair_threads")]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v("                                 "),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#MyISAM修复线程")]),s._v("\nskip-external-locking                                   "),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#跳过外部锁定，启用文件锁会影响性能")]),s._v("\n\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("## 日志配置选项")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("log_output")]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("FILE                                         "),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#日志输出目标，TABLE（输出到表）、FILE（输出到文件）、NONE（不输出），可选择一个或多个以逗>号分隔")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("log_error")]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("/usr/local/mysql/logs/error.log               "),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#错误日志存放路径")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("log_error_verbosity")]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v("                                   "),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#错误日志过滤，允许的值为1（仅错误），2（错误和警告），3（错误、警告和注释），默认值为3。")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("log_timestamps")]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("SYSTEM                                   "),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#错误日志消息格式，日志中显示时间戳的时区，UTC（默认值）和 SYSTEM（本地系统时区）")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("general_log")]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("ON                                          "),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#开启查询日志，一般选择不开启，因为查询日志记录很详细，会增大磁盘IO开销，影响性能")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("general_log_file")]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("/usr/local/mysql/logs/general.log      "),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#通用查询日志存放路径")]),s._v("\n\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("## 慢查询日志配置选项")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("slow_query_log")]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("ON                                       "),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#开启慢查询日志")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("slow_query_log_file")]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("/usr/local/mysql/logs/slowq.log\t\t"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#慢查询日志存放路径")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("long_query_time")]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("2")]),s._v("                                       "),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#慢查询时间，默认10（单位：秒）")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("min_examined_row_limit")]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("100")]),s._v("                              "),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#最小检查行限制，检索的行数必须达到此值才可被记为慢查询")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("log_slow_admin_statements")]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("ON                            "),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#记录慢查询管理语句")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("log_queries_not_using_indexes")]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("ON                        "),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#记录查询未使用索引语句")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("log_throttle_queries_not_using_indexes")]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("5")]),s._v("                "),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#记录未使用索引速率限制，默认为0不限制")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("log_slow_slave_statements")]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("ON                            "),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#记录从库复制的慢查询，作为从库时生效，从库复制中如果有慢查询也将被记录")]),s._v("\n\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("## 复制配置选项")]),s._v("\nserver-id"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v("                                             "),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#MySQL服务唯一标识")]),s._v("\nlog-bin"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("mysql-bin                                       "),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#开启二进制日志，默认位置是datadir数据目录")]),s._v("\nlog-bin-index"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("mysql-bin.index                           "),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#binlog索引文件")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("binlog_format")]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("MIXED                                     "),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#binlog日志格式，分三种：STATEMENT、ROW或MIXED，MySQL 5.7.7之前默认为STATEMENT，之后默认为ROW")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("binlog_cache_size")]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("1M                                    "),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#binlog缓存大小，默认32KB")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("max_binlog_cache_size")]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("1G                                "),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#binlog最大缓存大小，推荐最大值为4GB")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("max_binlog_size")]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("256M                                    "),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#binlog最大文件大小，最小值为4096字节，最大值和默认值为1GB")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("expire_logs_days")]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("7")]),s._v("                                      "),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#binlog过期天数，默认为0不自动删除")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("log_slave_updates")]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("ON                                    "),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#binlog级联复制")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("sync_binlog")]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v("                                           "),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#binlog同步频率，0为禁用同步（最佳性能，但可能丢失事务），为1开启同步（影响性能，但最安全不会丢失任何事务），为N操作N次事务后同步1次")]),s._v("\n\n"),n("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("relay_log")]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("relay-bin                                     "),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#relaylog文件路径，默认位置是datadir数据目录")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("relay_log_index")]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("relay-log.index                         "),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#relaylog索引文件")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("max_relay_log_size")]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("256M                                 "),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#relaylog最大文件大小")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("relay_log_purge")]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("ON                                      "),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#中继日志自动清除，默认值为1（ON）")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("relay_log_recovery")]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("ON                                   "),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#中继日志自动恢复")]),s._v("\n\n"),n("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("auto_increment_offset")]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v("                                 "),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#自增值偏移量")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("auto_increment_increment")]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v("                              "),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#自增值自增量")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("slave_net_timeout")]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("60")]),s._v("                                    "),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#从机连接超时时间")]),s._v("\nreplicate-wild-ignore-table"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("mysql.%                     "),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#复制时忽略的数据库表，告诉从线程不要复制到与给定通配符模式匹配的表")]),s._v("\nskip-slave-start                                        "),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#跳过Slave启动，Slave复制进程不随MySQL启动而启动")]),s._v("\n\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("## 其他配置选项")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#memlock=ON                                             #开启内存锁，此选项生效需系统支持mlockall()调用，将mysqld进程锁定在内存中，防止遇到操作系统导致mysqld交换到磁盘的问题")]),s._v("\n\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("mysqldump"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("                                             "),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#mysqldump数据库备份工具")]),s._v("\nquick                                                   "),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#强制mysqldump从服务器查询取得记录直接输出，而不是取得所有记录后将它们缓存到内存中")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("max_allowed_packet")]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("16M                                  "),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#最大传输数据字节，使用mysqldump工具备份数据库时，某表过大会导致备份失败，需要增大该值（大>于表大小即可）")]),s._v("\n\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("myisamchk"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("                                             "),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#使用myisamchk实用程序可以用来获得有关你的数据库表的统计信息或检查、修复、优化他们")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("key_buffer_size")]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("32M                                     "),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#索引缓冲区大小")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("myisam_sort_buffer_size")]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("8M                              "),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#排序缓冲区大小")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("read_buffer_size")]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("4M                                     "),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#读取缓区冲大小")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("write_buffer_size")]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("4M                                    "),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#写入缓冲区大小")]),s._v("\n\n\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# Esc（退出编辑模式）")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# :wq（保存退出）")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# :q（不想写了，直接退出）")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# :q!（写了一半不想写了，不保存强制退出）")]),s._v("\n\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 使用my.cnf配置文件和mysql用户初始化数据目录")]),s._v("\nbin/mysqld --defaults-file"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("/usr/local/mysql/etc/my.cnf --initialize --user"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("mysql\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br"),n("span",{staticClass:"line-number"},[s._v("8")]),n("br"),n("span",{staticClass:"line-number"},[s._v("9")]),n("br"),n("span",{staticClass:"line-number"},[s._v("10")]),n("br"),n("span",{staticClass:"line-number"},[s._v("11")]),n("br"),n("span",{staticClass:"line-number"},[s._v("12")]),n("br"),n("span",{staticClass:"line-number"},[s._v("13")]),n("br"),n("span",{staticClass:"line-number"},[s._v("14")]),n("br"),n("span",{staticClass:"line-number"},[s._v("15")]),n("br"),n("span",{staticClass:"line-number"},[s._v("16")]),n("br"),n("span",{staticClass:"line-number"},[s._v("17")]),n("br"),n("span",{staticClass:"line-number"},[s._v("18")]),n("br"),n("span",{staticClass:"line-number"},[s._v("19")]),n("br"),n("span",{staticClass:"line-number"},[s._v("20")]),n("br"),n("span",{staticClass:"line-number"},[s._v("21")]),n("br"),n("span",{staticClass:"line-number"},[s._v("22")]),n("br"),n("span",{staticClass:"line-number"},[s._v("23")]),n("br"),n("span",{staticClass:"line-number"},[s._v("24")]),n("br"),n("span",{staticClass:"line-number"},[s._v("25")]),n("br"),n("span",{staticClass:"line-number"},[s._v("26")]),n("br"),n("span",{staticClass:"line-number"},[s._v("27")]),n("br"),n("span",{staticClass:"line-number"},[s._v("28")]),n("br"),n("span",{staticClass:"line-number"},[s._v("29")]),n("br"),n("span",{staticClass:"line-number"},[s._v("30")]),n("br"),n("span",{staticClass:"line-number"},[s._v("31")]),n("br"),n("span",{staticClass:"line-number"},[s._v("32")]),n("br"),n("span",{staticClass:"line-number"},[s._v("33")]),n("br"),n("span",{staticClass:"line-number"},[s._v("34")]),n("br"),n("span",{staticClass:"line-number"},[s._v("35")]),n("br"),n("span",{staticClass:"line-number"},[s._v("36")]),n("br"),n("span",{staticClass:"line-number"},[s._v("37")]),n("br"),n("span",{staticClass:"line-number"},[s._v("38")]),n("br"),n("span",{staticClass:"line-number"},[s._v("39")]),n("br"),n("span",{staticClass:"line-number"},[s._v("40")]),n("br"),n("span",{staticClass:"line-number"},[s._v("41")]),n("br"),n("span",{staticClass:"line-number"},[s._v("42")]),n("br"),n("span",{staticClass:"line-number"},[s._v("43")]),n("br"),n("span",{staticClass:"line-number"},[s._v("44")]),n("br"),n("span",{staticClass:"line-number"},[s._v("45")]),n("br"),n("span",{staticClass:"line-number"},[s._v("46")]),n("br"),n("span",{staticClass:"line-number"},[s._v("47")]),n("br"),n("span",{staticClass:"line-number"},[s._v("48")]),n("br"),n("span",{staticClass:"line-number"},[s._v("49")]),n("br"),n("span",{staticClass:"line-number"},[s._v("50")]),n("br"),n("span",{staticClass:"line-number"},[s._v("51")]),n("br"),n("span",{staticClass:"line-number"},[s._v("52")]),n("br"),n("span",{staticClass:"line-number"},[s._v("53")]),n("br"),n("span",{staticClass:"line-number"},[s._v("54")]),n("br"),n("span",{staticClass:"line-number"},[s._v("55")]),n("br"),n("span",{staticClass:"line-number"},[s._v("56")]),n("br"),n("span",{staticClass:"line-number"},[s._v("57")]),n("br"),n("span",{staticClass:"line-number"},[s._v("58")]),n("br"),n("span",{staticClass:"line-number"},[s._v("59")]),n("br"),n("span",{staticClass:"line-number"},[s._v("60")]),n("br"),n("span",{staticClass:"line-number"},[s._v("61")]),n("br"),n("span",{staticClass:"line-number"},[s._v("62")]),n("br"),n("span",{staticClass:"line-number"},[s._v("63")]),n("br"),n("span",{staticClass:"line-number"},[s._v("64")]),n("br"),n("span",{staticClass:"line-number"},[s._v("65")]),n("br"),n("span",{staticClass:"line-number"},[s._v("66")]),n("br"),n("span",{staticClass:"line-number"},[s._v("67")]),n("br"),n("span",{staticClass:"line-number"},[s._v("68")]),n("br"),n("span",{staticClass:"line-number"},[s._v("69")]),n("br"),n("span",{staticClass:"line-number"},[s._v("70")]),n("br"),n("span",{staticClass:"line-number"},[s._v("71")]),n("br"),n("span",{staticClass:"line-number"},[s._v("72")]),n("br"),n("span",{staticClass:"line-number"},[s._v("73")]),n("br"),n("span",{staticClass:"line-number"},[s._v("74")]),n("br"),n("span",{staticClass:"line-number"},[s._v("75")]),n("br"),n("span",{staticClass:"line-number"},[s._v("76")]),n("br"),n("span",{staticClass:"line-number"},[s._v("77")]),n("br"),n("span",{staticClass:"line-number"},[s._v("78")]),n("br"),n("span",{staticClass:"line-number"},[s._v("79")]),n("br"),n("span",{staticClass:"line-number"},[s._v("80")]),n("br"),n("span",{staticClass:"line-number"},[s._v("81")]),n("br"),n("span",{staticClass:"line-number"},[s._v("82")]),n("br"),n("span",{staticClass:"line-number"},[s._v("83")]),n("br"),n("span",{staticClass:"line-number"},[s._v("84")]),n("br"),n("span",{staticClass:"line-number"},[s._v("85")]),n("br"),n("span",{staticClass:"line-number"},[s._v("86")]),n("br"),n("span",{staticClass:"line-number"},[s._v("87")]),n("br"),n("span",{staticClass:"line-number"},[s._v("88")]),n("br"),n("span",{staticClass:"line-number"},[s._v("89")]),n("br"),n("span",{staticClass:"line-number"},[s._v("90")]),n("br"),n("span",{staticClass:"line-number"},[s._v("91")]),n("br"),n("span",{staticClass:"line-number"},[s._v("92")]),n("br"),n("span",{staticClass:"line-number"},[s._v("93")]),n("br"),n("span",{staticClass:"line-number"},[s._v("94")]),n("br"),n("span",{staticClass:"line-number"},[s._v("95")]),n("br"),n("span",{staticClass:"line-number"},[s._v("96")]),n("br"),n("span",{staticClass:"line-number"},[s._v("97")]),n("br"),n("span",{staticClass:"line-number"},[s._v("98")]),n("br"),n("span",{staticClass:"line-number"},[s._v("99")]),n("br"),n("span",{staticClass:"line-number"},[s._v("100")]),n("br"),n("span",{staticClass:"line-number"},[s._v("101")]),n("br"),n("span",{staticClass:"line-number"},[s._v("102")]),n("br"),n("span",{staticClass:"line-number"},[s._v("103")]),n("br"),n("span",{staticClass:"line-number"},[s._v("104")]),n("br"),n("span",{staticClass:"line-number"},[s._v("105")]),n("br"),n("span",{staticClass:"line-number"},[s._v("106")]),n("br"),n("span",{staticClass:"line-number"},[s._v("107")]),n("br"),n("span",{staticClass:"line-number"},[s._v("108")]),n("br"),n("span",{staticClass:"line-number"},[s._v("109")]),n("br"),n("span",{staticClass:"line-number"},[s._v("110")]),n("br"),n("span",{staticClass:"line-number"},[s._v("111")]),n("br"),n("span",{staticClass:"line-number"},[s._v("112")]),n("br"),n("span",{staticClass:"line-number"},[s._v("113")]),n("br"),n("span",{staticClass:"line-number"},[s._v("114")]),n("br"),n("span",{staticClass:"line-number"},[s._v("115")]),n("br"),n("span",{staticClass:"line-number"},[s._v("116")]),n("br"),n("span",{staticClass:"line-number"},[s._v("117")]),n("br"),n("span",{staticClass:"line-number"},[s._v("118")]),n("br"),n("span",{staticClass:"line-number"},[s._v("119")]),n("br"),n("span",{staticClass:"line-number"},[s._v("120")]),n("br"),n("span",{staticClass:"line-number"},[s._v("121")]),n("br"),n("span",{staticClass:"line-number"},[s._v("122")]),n("br"),n("span",{staticClass:"line-number"},[s._v("123")]),n("br"),n("span",{staticClass:"line-number"},[s._v("124")]),n("br"),n("span",{staticClass:"line-number"},[s._v("125")]),n("br"),n("span",{staticClass:"line-number"},[s._v("126")]),n("br"),n("span",{staticClass:"line-number"},[s._v("127")]),n("br"),n("span",{staticClass:"line-number"},[s._v("128")]),n("br"),n("span",{staticClass:"line-number"},[s._v("129")]),n("br"),n("span",{staticClass:"line-number"},[s._v("130")]),n("br"),n("span",{staticClass:"line-number"},[s._v("131")]),n("br"),n("span",{staticClass:"line-number"},[s._v("132")]),n("br"),n("span",{staticClass:"line-number"},[s._v("133")]),n("br"),n("span",{staticClass:"line-number"},[s._v("134")]),n("br"),n("span",{staticClass:"line-number"},[s._v("135")]),n("br"),n("span",{staticClass:"line-number"},[s._v("136")]),n("br"),n("span",{staticClass:"line-number"},[s._v("137")]),n("br"),n("span",{staticClass:"line-number"},[s._v("138")]),n("br"),n("span",{staticClass:"line-number"},[s._v("139")]),n("br"),n("span",{staticClass:"line-number"},[s._v("140")]),n("br"),n("span",{staticClass:"line-number"},[s._v("141")]),n("br"),n("span",{staticClass:"line-number"},[s._v("142")]),n("br"),n("span",{staticClass:"line-number"},[s._v("143")]),n("br"),n("span",{staticClass:"line-number"},[s._v("144")]),n("br"),n("span",{staticClass:"line-number"},[s._v("145")]),n("br"),n("span",{staticClass:"line-number"},[s._v("146")]),n("br"),n("span",{staticClass:"line-number"},[s._v("147")]),n("br"),n("span",{staticClass:"line-number"},[s._v("148")]),n("br"),n("span",{staticClass:"line-number"},[s._v("149")]),n("br"),n("span",{staticClass:"line-number"},[s._v("150")]),n("br"),n("span",{staticClass:"line-number"},[s._v("151")]),n("br")])]),n("h2",{attrs:{id:"_5-配置环境变量"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_5-配置环境变量"}},[s._v("#")]),s._v(" 5. 配置环境变量")]),s._v(" "),n("div",{staticClass:"language-shell line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-shell"}},[n("code",[n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 打开配置文件")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("vi")]),s._v(" /etc/profile\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 在文件末尾加入下面代码，:wq保存退出(无权限可:q!强制退出，换root账户重来)")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("export")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("MYSQL_HOME")]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("/usr/local/mysql\n"),n("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("export")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token assign-left variable"}},[n("span",{pre:!0,attrs:{class:"token environment constant"}},[s._v("PATH")])]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),n("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$MYSQL_HOME")]),s._v("/bin:"),n("span",{pre:!0,attrs:{class:"token environment constant"}},[s._v("$PATH")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 使环境变量即时生效")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("source")]),s._v(" /etc/profile\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br")])]),n("h2",{attrs:{id:"_6-systemctl方式启动mysql"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_6-systemctl方式启动mysql"}},[s._v("#")]),s._v(" 6. systemctl方式启动MySQL")]),s._v(" "),n("div",{staticClass:"language-shell line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-shell"}},[n("code",[n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 复制配置文件到系统服务配置")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("cp")]),s._v(" support-files/mysql.server /etc/init.d/mysql\n\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 重新加载系统服务配置")]),s._v("\nsystemctl daemon-reload\n\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 启动mysql服务")]),s._v("\nsystemctl start mysql\n\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 下面列出其余systemctl命令（不用运行）")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 查看mysql服务状态")]),s._v("\nsystemctl status mysql\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 停止mysql服务")]),s._v("\nsystemctl stop mysql\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 重新启动mysql服务")]),s._v("\nsystemctl restart mysql\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 配置mysql开机自动启动")]),s._v("\nsystemctl "),n("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("enable")]),s._v(" mysql\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 配置mysql开机不自动启动")]),s._v("\nsystemctl disable mysql\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br"),n("span",{staticClass:"line-number"},[s._v("8")]),n("br"),n("span",{staticClass:"line-number"},[s._v("9")]),n("br"),n("span",{staticClass:"line-number"},[s._v("10")]),n("br"),n("span",{staticClass:"line-number"},[s._v("11")]),n("br"),n("span",{staticClass:"line-number"},[s._v("12")]),n("br"),n("span",{staticClass:"line-number"},[s._v("13")]),n("br"),n("span",{staticClass:"line-number"},[s._v("14")]),n("br"),n("span",{staticClass:"line-number"},[s._v("15")]),n("br"),n("span",{staticClass:"line-number"},[s._v("16")]),n("br"),n("span",{staticClass:"line-number"},[s._v("17")]),n("br"),n("span",{staticClass:"line-number"},[s._v("18")]),n("br"),n("span",{staticClass:"line-number"},[s._v("19")]),n("br"),n("span",{staticClass:"line-number"},[s._v("20")]),n("br")])]),n("h2",{attrs:{id:"_7-登录mysql修改密码"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_7-登录mysql修改密码"}},[s._v("#")]),s._v(" 7. 登录MySQL修改密码")]),s._v(" "),n("div",{staticClass:"language-shell line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-shell"}},[n("code",[n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 查询生成的临时密码")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("grep")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"password"')]),s._v(" /usr/local/mysql/logs/error.log\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 登录mysql")]),s._v("\nmysql -uroot -p\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# Enter password: （输入查询到的临时密码）")]),s._v("\n\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 因为是本地测试环境，所以想把密码改的简单点")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 这密码有够LOW了，但我就是想要")]),s._v("\nALTER "),n("span",{pre:!0,attrs:{class:"token environment constant"}},[s._v("USER")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v("'root'")]),s._v("@"),n("span",{pre:!0,attrs:{class:"token string"}},[s._v("'localhost'")]),s._v(" IDENTIFIED BY "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v("'1234'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 可以退出，试试用新密码重新登录")]),s._v("\nquit\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br"),n("span",{staticClass:"line-number"},[s._v("8")]),n("br"),n("span",{staticClass:"line-number"},[s._v("9")]),n("br"),n("span",{staticClass:"line-number"},[s._v("10")]),n("br"),n("span",{staticClass:"line-number"},[s._v("11")]),n("br")])]),n("h2",{attrs:{id:"_8-配置远程连接"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_8-配置远程连接"}},[s._v("#")]),s._v(" 8. 配置远程连接")]),s._v(" "),n("div",{staticClass:"language-shell line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-shell"}},[n("code",[n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 用新密码登进去试试")]),s._v("\nmysql -uroot -p\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 授权 所有权限（all），所有数据库（*.*） 给 用户名（root），任何主机（%），密码（yourpassword）")]),s._v("\ngrant all privileges on *.* to "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v("'root'")]),s._v("@"),n("span",{pre:!0,attrs:{class:"token string"}},[s._v("'%'")]),s._v(" identified by "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v("'yourpassword'")]),s._v(" with grant option"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 刷新权限使其立即生效")]),s._v("\nflush privileges"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 退出MySQL")]),s._v("\nquit\n\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 查看防火墙状态")]),s._v("\nsystemctl status firewalld\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 查看3306端口状态")]),s._v("\nfirewall-cmd --zone"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("public --query-port"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("3306")]),s._v("/tcp\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 打开3306端口，--permanent 永久生效（无此参数重启后失效）")]),s._v("\nfirewall-cmd --zone"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("public --add-port"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("3306")]),s._v("/tcp --permanent\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 重新加载防火墙")]),s._v("\nfirewall-cmd --reload\n\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 下面列出相关命令给喜欢折腾的朋友（教程已完结后面不用依次执行了）")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 开启防火墙")]),s._v("\nsystemctl start firewalld\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 关闭防火墙")]),s._v("\nsystemctl stop firewalld\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 删除3306端口")]),s._v("\nfirewall-cmd --zone"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("public --remove-port"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("3306")]),s._v("/tcp --permanent\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br"),n("span",{staticClass:"line-number"},[s._v("8")]),n("br"),n("span",{staticClass:"line-number"},[s._v("9")]),n("br"),n("span",{staticClass:"line-number"},[s._v("10")]),n("br"),n("span",{staticClass:"line-number"},[s._v("11")]),n("br"),n("span",{staticClass:"line-number"},[s._v("12")]),n("br"),n("span",{staticClass:"line-number"},[s._v("13")]),n("br"),n("span",{staticClass:"line-number"},[s._v("14")]),n("br"),n("span",{staticClass:"line-number"},[s._v("15")]),n("br"),n("span",{staticClass:"line-number"},[s._v("16")]),n("br"),n("span",{staticClass:"line-number"},[s._v("17")]),n("br"),n("span",{staticClass:"line-number"},[s._v("18")]),n("br"),n("span",{staticClass:"line-number"},[s._v("19")]),n("br"),n("span",{staticClass:"line-number"},[s._v("20")]),n("br"),n("span",{staticClass:"line-number"},[s._v("21")]),n("br"),n("span",{staticClass:"line-number"},[s._v("22")]),n("br"),n("span",{staticClass:"line-number"},[s._v("23")]),n("br"),n("span",{staticClass:"line-number"},[s._v("24")]),n("br"),n("span",{staticClass:"line-number"},[s._v("25")]),n("br")])]),n("p",[s._v("在外面用Navicat等可视化工具测试了下，可以远程连接数据库了，可劲造吧。。。")]),s._v(" "),n("h2",{attrs:{id:"参考官方文档"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#参考官方文档"}},[s._v("#")]),s._v(" 参考官方文档")]),s._v(" "),n("ul",[n("li",[n("p",[n("a",{attrs:{href:"https://dev.mysql.com/downloads/mysql/",target:"_blank",rel:"noopener noreferrer"}},[s._v("官方下载地址"),n("OutboundLink")],1)])]),s._v(" "),n("li",[n("p",[n("a",{attrs:{href:"https://dev.mysql.com/doc/refman/5.7/en/installing-source-distribution.html",target:"_blank",rel:"noopener noreferrer"}},[s._v("官方安装文档"),n("OutboundLink")],1)])]),s._v(" "),n("li",[n("p",[n("a",{attrs:{href:"https://dev.mysql.com/doc/refman/5.7/en/source-configuration-options.html",target:"_blank",rel:"noopener noreferrer"}},[s._v("camke参数详解"),n("OutboundLink")],1)])]),s._v(" "),n("li",[n("p",[n("a",{attrs:{href:"https://dev.mysql.com/doc/refman/5.7/en/postinstallation.html",target:"_blank",rel:"noopener noreferrer"}},[s._v("安装后设置和测试文档"),n("OutboundLink")],1)])]),s._v(" "),n("li",[n("p",[n("a",{attrs:{href:"https://dev.mysql.com/doc/refman/5.7/en/mysql-ssl-rsa-setup.html",target:"_blank",rel:"noopener noreferrer"}},[s._v("SSL/RSA配置加密连接"),n("OutboundLink")],1)])]),s._v(" "),n("li",[n("p",[n("a",{attrs:{href:"https://dev.mysql.com/doc/refman/5.7/en/server-option-variable-reference.html",target:"_blank",rel:"noopener noreferrer"}},[s._v("服务器选项变量参考"),n("OutboundLink")],1)])]),s._v(" "),n("li",[n("p",[n("a",{attrs:{href:"https://dev.mysql.com/doc/refman/5.7/en/environment-variables.html",target:"_blank",rel:"noopener noreferrer"}},[s._v("MYSQL使用的环境变量"),n("OutboundLink")],1)])]),s._v(" "),n("li",[n("p",[n("a",{attrs:{href:"https://dev.mysql.com/doc/refman/5.7/en/replication-options-reference.html",target:"_blank",rel:"noopener noreferrer"}},[s._v("复制和二进制日志选项参考"),n("OutboundLink")],1)])]),s._v(" "),n("li",[n("p",[n("a",{attrs:{href:"https://dev.mysql.com/doc/refman/5.7/en/innodb-init-startup-configuration.html",target:"_blank",rel:"noopener noreferrer"}},[s._v("InnoDB启动配置"),n("OutboundLink")],1)])]),s._v(" "),n("li",[n("p",[n("a",{attrs:{href:"https://dev.mysql.com/doc/refman/5.6/en/server-default-changes.html",target:"_blank",rel:"noopener noreferrer"}},[s._v("MYSQL5.6服务器默认值"),n("OutboundLink")],1)])])])])}),[],!1,null,null,null);a.default=e.exports}}]);